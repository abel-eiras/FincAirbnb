# Estructura del Proyecto FincAirbnb

## Visi√≥n General

FincAirbnb est√° organizado como un **monorepo** con frontend y backend claramente separados. Actualmente, el desarrollo se centra en el **frontend con datos mock** antes de implementar el backend real.

---

## Estructura de Carpetas

```
FincAirbnb/                      # Ra√≠z del monorepo
‚îÇ
‚îú‚îÄ‚îÄ üìÅ FRONTEND (Actual - Next.js 13)
‚îÇ   ‚îú‚îÄ‚îÄ app/                     # Next.js App Router
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ (auth)/             # Rutas de autenticaci√≥n
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ rexistro/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ acceder/
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ recuperar-contrasinal/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ dashboard/          # Alias temporal (mover a taboleiro)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ taboleiro/          # Dashboard protegido (futuro)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ fincas/             # Cat√°logo de propiedades
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ perfil/             # Perfil de usuario
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ layout.tsx          # Layout ra√≠z
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ page.tsx            # Homepage
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ components/              # Componentes React
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ auth/               # Autenticaci√≥n
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ui/                 # shadcn/ui components
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ dashboard/          # Dashboard components
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ properties/         # Propiedades components
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ shared/             # Componentes compartidos
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ contexts/                # React Context API
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ AuthContext.tsx
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ hooks/                   # Custom React hooks
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ use-toast.ts
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ lib/                     # Utilidades
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ auth-mock.ts        # Auth mock (actual)
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ utils.ts
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ mocks/                   # üÜï Datos JSON mock
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ users.json
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ properties.json
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ bookings.json
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ messages.json
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ reviews.json
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ README.md
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ services/                # üÜï Mock services (simulan API)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ mockAuth.ts
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ mockProperties.ts
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ mockBookings.ts
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ mockMessages.ts
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ mockReviews.ts
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ README.md
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ types/                   # TypeScript types
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ auth.ts
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ middleware.ts            # Next.js middleware
‚îÇ   ‚îú‚îÄ‚îÄ next.config.js
‚îÇ   ‚îú‚îÄ‚îÄ package.json
‚îÇ   ‚îú‚îÄ‚îÄ tsconfig.json
‚îÇ   ‚îî‚îÄ‚îÄ tailwind.config.ts
‚îÇ
‚îú‚îÄ‚îÄ üìÅ BACKEND (Futuro)
‚îÇ   ‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ api/                # API routes
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ controllers/        # Controladores
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ services/           # L√≥gica de negocio
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ models/             # Modelos de datos
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ middleware/         # Middleware
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ utils/              # Utilidades
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ server.ts           # Entry point
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ prisma/                 # Prisma ORM
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ schema.prisma
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ package.json
‚îÇ   ‚îú‚îÄ‚îÄ tsconfig.json
‚îÇ   ‚îî‚îÄ‚îÄ README.md
‚îÇ
‚îú‚îÄ‚îÄ üìÅ SHARED (C√≥digo compartido)
‚îÇ   ‚îú‚îÄ‚îÄ types/                  # Types compartidos
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ user.ts
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ property.ts
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ booking.ts
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ message.ts
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ review.ts
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ constants/              # Constantes
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ roles.ts
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ status.ts
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ config.ts
‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ utils/                  # Utilidades compartidas
‚îÇ       ‚îî‚îÄ‚îÄ validators.ts
‚îÇ
‚îú‚îÄ‚îÄ üìÅ DOCUMENTACI√ìN
‚îÇ   ‚îú‚îÄ‚îÄ context/                # Docs t√©cnicas (ingl√©s)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ business/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ technical/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ features/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ design/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ integrations/
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ docs/                   # Docs de desarrollo (espa√±ol)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ milestones/         # Milestones de desarrollo
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Milestone_00.md (‚úÖ Completado)
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Milestone_01.md (üÜï)
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Milestone_02.md (üÜï)
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ... (hasta 10)
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ development/
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ AGENTS.MD              # Para agentes de IA
‚îÇ   ‚îú‚îÄ‚îÄ RESUMEN_EJECUTIVO.md   # Para stakeholders
‚îÇ   ‚îî‚îÄ‚îÄ ESTRUCTURA_PROYECTO.md # Este archivo
‚îÇ
‚îú‚îÄ‚îÄ üìÅ RA√çZ
‚îÇ   ‚îú‚îÄ‚îÄ .gitignore
‚îÇ   ‚îú‚îÄ‚îÄ README.md              # README principal (gallego)
‚îÇ   ‚îî‚îÄ‚îÄ package.json           # Workspace root (opcional)
‚îÇ
‚îî‚îÄ‚îÄ üìÅ ASSETS (futuro)
    ‚îî‚îÄ‚îÄ images/

```

---

## Estado Actual vs. Futuro

### ‚úÖ Estado Actual (Fase 1 Completada)

**Ubicaci√≥n**: Ra√≠z del proyecto (act√∫a como frontend)

**Implementado**:
- ‚úÖ Sistema de autenticaci√≥n mock
- ‚úÖ Registro, login, recuperaci√≥n de contrase√±a
- ‚úÖ Dashboard b√°sico
- ‚úÖ Protecci√≥n de rutas
- ‚úÖ Gesti√≥n de perfil
- ‚úÖ UI components (shadcn/ui)

**Estructura actual**:
```
/ (ra√≠z = frontend)
‚îú‚îÄ‚îÄ app/
‚îú‚îÄ‚îÄ components/
‚îú‚îÄ‚îÄ contexts/
‚îú‚îÄ‚îÄ lib/
‚îú‚îÄ‚îÄ types/
‚îî‚îÄ‚îÄ middleware.ts
```

### üîÑ Pr√≥ximos Pasos (Fase 2+)

**A a√±adir**:
- üÜï `/mocks/` - Datos JSON mock
- üÜï `/services/` - Servicios que simulan API
- üÜï `/shared/` - C√≥digo compartido (types, constants)
- üÜï `/backend/` - Estructura vac√≠a para futuro

**Reorganizaci√≥n m√≠nima**:
- Mover c√≥digo de `/lib/auth-mock.ts` a `/services/mockAuth.ts` (futuro)
- Centralizar types en `/shared/types/`
- Mantener compatibilidad con c√≥digo existente

---

## Filosof√≠a de Desarrollo

### Fase Frontend (Actual - Milestones 1-10)

**Objetivo**: Construir toda la UI/UX con datos mock

**Tecnolog√≠as**:
- Next.js 13 (App Router)
- React 18 + TypeScript
- Tailwind CSS + shadcn/ui
- Context API para estado
- JSON files para datos mock

**Ventajas**:
- Desarrollo r√°pido sin dependencias de backend
- Iteraci√≥n r√°pida en dise√±o
- Permite testing de UX temprano
- Datos predecibles y controlables

### Fase Backend (Futuro - Post Milestone 10)

**Objetivo**: API real con base de datos

**Tecnolog√≠as previstas**:
- Node.js + Express o Next.js API Routes
- PostgreSQL + Prisma ORM
- JWT Authentication
- Stripe + Redsys para pagos

**Migraci√≥n**:
- Los servicios mock se reemplazan por llamadas API reales
- Los types compartidos se mantienen
- La UI permanece igual (solo cambia el origen de datos)

---

## Convenciones de C√≥digo

### Nomenclatura de Archivos

```
PascalCase:    Componentes React (Button.tsx, PropertyCard.tsx)
camelCase:     Funciones, hooks, utils (useAuth.ts, formatDate.ts)
kebab-case:    Rutas de app/ (rexistro/, taboleiro/)
UPPERCASE:     Constantes (ROLES.ts, CONFIG.ts)
lowercase:     Archivos de config (package.json, tsconfig.json)
```

### Estructura de Componentes

```typescript
// ComponentName.tsx
import { ... } from '...'

// Types
interface ComponentNameProps {
  ...
}

// Component
export function ComponentName({ props }: ComponentNameProps) {
  // Hooks
  const [state, setState] = useState(...)
  
  // Handlers
  const handleAction = () => { ... }
  
  // Effects
  useEffect(() => { ... }, [])
  
  // Render
  return (
    <div>...</div>
  )
}

// Exports
export default ComponentName
```

### Organizaci√≥n de Imports

```typescript
// 1. React
import { useState, useEffect } from 'react'

// 2. Next.js
import { useRouter } from 'next/navigation'

// 3. External libraries
import { toast } from 'sonner'

// 4. Internal: Types
import type { User, Property } from '@/shared/types'

// 5. Internal: Services
import { getProperties } from '@/services/mockProperties'

// 6. Internal: Components
import { Button } from '@/components/ui/button'
import { PropertyCard } from '@/components/properties/PropertyCard'

// 7. Internal: Utils
import { formatDate, formatPrice } from '@/lib/utils'

// 8. Styles
import styles from './Component.module.css'
```

---

## Datos Mock

### Ubicaci√≥n: `/mocks/`

Archivos JSON con datos de ejemplo para desarrollo:

- `users.json` - Usuarios (propietarios, hu√©spedes, admin)
- `properties.json` - Propiedades/fincas
- `bookings.json` - Reservas
- `messages.json` - Mensajes
- `reviews.json` - Rese√±as

### Servicios Mock: `/services/`

Funciones que simulan llamadas API:

```typescript
// services/mockProperties.ts
export async function getProperties(filters?: PropertyFilters) {
  // Simula delay de red
  await delay(300)
  
  // Lee datos de JSON
  const properties = await import('@/mocks/properties.json')
  
  // Aplica filtros
  return filterProperties(properties.default, filters)
}
```

**Ventajas**:
- Simula latencia real de red
- Permite testing de estados de carga
- F√°cil de reemplazar con API real
- No requiere backend funcionando

---

## Migraciones Futuras

### De Mock a API Real

**Antes** (Mock):
```typescript
import { getProperties } from '@/services/mockProperties'

const properties = await getProperties({ city: 'Pontevedra' })
```

**Despu√©s** (API):
```typescript
import { getProperties } from '@/services/api/properties'

const properties = await getProperties({ city: 'Pontevedra' })
```

**Cambios necesarios**:
1. Crear archivo nuevo: `/services/api/properties.ts`
2. Implementar fetch a endpoint real
3. Actualizar imports en componentes
4. Los types y la l√≥gica de UI permanecen iguales

---

## Scripts √ötiles

```bash
# Desarrollo
npm run dev              # Inicia Next.js dev server

# Build
npm run build            # Build para producci√≥n
npm run start            # Sirve build de producci√≥n

# Linting
npm run lint             # ESLint

# Type checking
npx tsc --noEmit         # Verifica tipos sin compilar

# Futuro: Backend
cd backend
npm run dev              # API dev server (futuro)
```

---

## Variables de Entorno

### Frontend (Actual)

```bash
# .env.local
NEXT_PUBLIC_APP_URL=http://localhost:3000
NEXT_PUBLIC_MOCK_DELAY=300  # ms
```

### Backend (Futuro)

```bash
# backend/.env
DATABASE_URL=postgresql://...
JWT_SECRET=...
STRIPE_SECRET_KEY=...
REDSYS_SECRET_KEY=...
```

---

## Milestones de Desarrollo

| # | Milestone | Duraci√≥n | Estado |
|---|-----------|----------|--------|
| 0 | Autenticaci√≥n y Base | - | ‚úÖ Completado |
| 1 | Estructura Mock + Dashboard Base | 1 sem | üìÖ Planificado |
| 2 | Dashboard Propietario - Vista General | 1.5 sem | üìÖ Planificado |
| 3 | Dashboard Propietario - Gesti√≥n | 2 sem | üìÖ Planificado |
| 4 | Dashboard Cliente/Hu√©sped | 1 sem | üìÖ Planificado |
| 5 | Cat√°logo + B√∫squeda | 2 sem | üìÖ Planificado |
| 6 | Detalle de Propiedad | 1.5 sem | üìÖ Planificado |
| 7 | Sistema de Reservas (UI) | 2 sem | üìÖ Planificado |
| 8 | Sistema de Reviews (UI) | 1 sem | üìÖ Planificado |
| 9 | Mensajer√≠a (UI) | 1.5 sem | üìÖ Planificado |
| 10 | Perfiles + Configuraci√≥n | 1 sem | üìÖ Planificado |

**Total Frontend**: ~14 semanas (~3.5 meses)

Ver `/docs/milestones/` para detalles de cada milestone.

---

## Preguntas Frecuentes

### ¬øPor qu√© monorepo?

- **Simplicidad**: Todo en un lugar
- **Aprendizaje**: Ver frontend y backend juntos
- **Compartir c√≥digo**: Types, constantes, utils
- **Un solo repositorio Git**: M√°s f√°cil de gestionar

### ¬øCu√°ndo empezamos con backend?

Despu√©s de completar los 10 milestones de frontend. As√≠ tendremos:
- UI/UX validada y pulida
- Todos los flujos probados con mocks
- Especificaciones claras de qu√© necesita el backend

### ¬øLos mocks no son desperdicio?

No, porque:
- Permiten desarrollo frontend independiente
- Sirven para testing
- Documentan la estructura de datos esperada
- Facilitan demos sin backend funcionando

### ¬øC√≥mo contribuir?

1. Leer `/docs/README.md` y `/AGENTS.MD`
2. Revisar milestone actual en `/docs/milestones/`
3. Seguir convenciones de este documento
4. Mantener pol√≠tica de idioma gallego en UI

---

**√öltima Actualizaci√≥n**: Octubre 2024  
**Versi√≥n**: 2.0 (Reestructuraci√≥n monorepo)  
**Mantenido por**: Equipo de desarrollo

